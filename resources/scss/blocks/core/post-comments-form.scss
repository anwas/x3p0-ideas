////
/// Post Comments Form block CSS.
///
/// Note: The comment form input wrappers do not have any classes in the editor:
/// e.g., `<p class="comment-form-comment">` is simply `<p>`. But they are
/// correct on the front end.
///
/// @author Justin Tadlock <justintadlock@gmail.com>
/// @link   https://github.com/x3p0-dev/x3p0-ideas
////

@use '../../tools/form';
@use '../../tools/icon';
@use '../../tools/inline-icon';

// -----------------------------------------------------------------------------
// Block fixes.
// -----------------------------------------------------------------------------

///
/// Fixes misaligned checkbox and label when the label wraps two or more lines.
/// This is because core uses centered alignment.
///
.wp-block-post-comments-form .comment-form-cookies-consent {
	align-items: baseline;
}

// -----------------------------------------------------------------------------
// Block customizations.
// -----------------------------------------------------------------------------

///
/// Faux `blockGap` support.
///
.wp-block-post-comments-form > * {
	margin-block-start: 0;
	margin-block-end: 0;
}

.wp-block-post-comments-form > * + *,
.wp-block-post-comments-form .comment-reply-title + * {
	margin-block-start: var(--wp--custom--gap, var(--wp--preset--spacing--base));
}

///
/// Creates a grid display for the comment form.
///
.wp-block-post-comments-form .comment-form {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: var(--wp--custom--gap, var(--wp--preset--spacing--base));

	// By default, all items span the full width of the grid.
	> * {
		margin: 0;
		grid-column: 1/-1;
	}

	// Aligns the author and email fields into a single row.
	@media (min-width: 40rem) {
		.comment-form-author { grid-column: 1/1; }
		.comment-form-email  { grid-column: 2/2; }
	}
}

///
/// Import label styling. We must specifically target the default field labels
/// to overrule some core styles (like label margins).
///
.wp-block-post-comments-form label,
.wp-block-post-comments-form .comment-form-author label,
.wp-block-post-comments-form .comment-form-email label,
.wp-block-post-comments-form .comment-form-url label {
	@include form.label();
}

///
/// Import form input styling.
///
.wp-block-post-comments-form input:not([type=submit]):not([type=checkbox]),
.wp-block-post-comments-form textarea {
	@include form.input();
}

// -----------------------------------------------------------------------------
// Block style variations.
// -----------------------------------------------------------------------------

///
/// Adds icons to the various form elements.
///
.wp-block-post-comments-form.is-style-icons {

	.comment-form-comment,
	.comment-form-author,
	.comment-form-email,
	.comment-form-url {
		label {
			@include inline-icon.prefix(icon.get-url('comment'));
		}
	}

	.comment-form-author label::before {
		@include inline-icon.modify(icon.get-url('user'));
	}

	.comment-form-email label::before {
		@include inline-icon.modify(icon.get-url('mail'));
	}

	.comment-form-url label::before {
		@include inline-icon.modify(icon.get-url('link'));
	}
}
