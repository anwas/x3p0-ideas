////
/// Group block CSS.
///
/// @author Justin Tadlock <justintadlock@gmail.com>
/// @link   https://github.com/x3p0-dev/x3p0-ideas
////

@use '../../tools/prose';

// -----------------------------------------------------------------------------
// Block fixes.
// -----------------------------------------------------------------------------

// Row blocks within Stack blocks lose their width and collapse. This breaks
// the content justification set for the nested Row.
.wp-block-group-is-layout-flex.is-vertical > :where(.wp-block-group-is-layout-flex:not(.is-vertical)) {
	width: 100%;
}

// Zero out global padding so that the front end and editor match.
.has-global-padding > .alignfull > .wp-block-group {
	padding-left: 0;
	padding-right: 0;
}

// -----------------------------------------------------------------------------
// Block customizations.
// -----------------------------------------------------------------------------

// Ensures that `cqi` values are based on their container, not the viewport. For
// the Group block's grid layout, we need to specifically target the nested
// elements because they become the container.
.wp-block-group-is-layout-grid > * {
	container-type: inline-size;
}

// -----------------------------------------------------------------------------
// Block style variations.
// -----------------------------------------------------------------------------

///
/// The boxed style adds some default padding and a background. Move style
/// rules to `theme.json` with support.
///
/// @link      https://github.com/WordPress/gutenberg/pull/57908
/// @wordpress 6.5
///
.wp-block-group.is-style-box,
.editor-styles-wrapper .wp-block-group.is-style-box {
	overflow:      hidden;
	color:         var(--wp--custom--box--color, inherit);
	background:    var(--wp--custom--box--background, transparent);
	border-width:  var(--wp--custom--box--border-width, 0);
	border-style:  var(--wp--custom--box--border-style, solid);
	border-color:  var(--wp--custom--box--border-color, transparent);
	border-radius: var(--wp--custom--box--border-radius, 0);
	padding:       var(--wp--custom--box--padding, 0);
	box-shadow:    var(--wp--custom--box--shadow, none);
}

///
/// The card style adds a default border. Move style rules to `theme.json` with
/// support.
///
/// @link      https://github.com/WordPress/gutenberg/pull/57908
/// @wordpress 6.5
///
.wp-block-group.is-style-card,
.editor-styles-wrapper .wp-block-group.is-style-card {
	overflow:      hidden;
	color:         var(--wp--custom--card--color, inherit);
	background:    var(--wp--custom--card--background, transparent);
	border-width:  var(--wp--custom--card--border-width, 0);
	border-style:  var(--wp--custom--card--border-style, solid);
	border-color:  var(--wp--custom--card--border-color, transparent);
	border-radius: var(--wp--custom--card--border-radius, 0);
	padding:       var(--wp--custom--card--padding, 0);
	box-shadow:    var(--wp--custom--card--shadow, none);

	> footer {
		color:         var(--wp--custom--card-footer--color, inherit);
		background:    var(--wp--custom--card-footer--background, transparent);
		border-width:  var(--wp--custom--card-footer--border-width, 0);
		border-style:  var(--wp--custom--card-footer--border-style, solid);
		border-color:  var(--wp--custom--card-footer--border-color, transparent);
		padding:       var(--wp--custom--card-footer--padding);
	}
}

///
/// The message style is intended for notes, warnings, notices, etc. Move style
/// rules to `theme.json` with support.
///
/// @link      https://github.com/WordPress/gutenberg/pull/57908
/// @wordpress 6.5
///
.wp-block-group.is-style-message,
.editor-styles-wrapper .wp-block-group.is-style-message {
	overflow:      hidden;
	color:         var(--wp--custom--message--color, inherit);
	background:    var(--wp--custom--message--background, transparent);
	border-width:  var(--wp--custom--message--border-width, 0);
	border-style:  var(--wp--custom--message--border-style, solid);
	border-color:  var(--wp--custom--message--border-color, transparent);
	border-radius: var(--wp--custom--message--border-radius, 0);
	padding:       var(--wp--custom--message--padding, 0);
	box-shadow:    var(--wp--custom--message--shadow, none);

	@include prose.prose();
}

///
/// The section style is meant for grouping several blocks. It was primarily
/// built for full-width sections, but the alignment/width is controlled at the
/// block level.
///
/// @link      https://github.com/WordPress/gutenberg/pull/57908
/// @wordpress 6.5
///
.wp-block-group.is-style-section,
.editor-styles-wrapper .wp-block-group.is-style-section {
	color:        var(--wp--custom--section--color, inherit);
	background:   var(--wp--custom--section--background, transparent);
	border-width: var(--wp--custom--section--border-width, 0);
	border-style: var(--wp--custom--section--border-style, solid);
	border-color: var(--wp--custom--section--border-color, transparent);
	padding:      var(--wp--custom--section--padding, 0);
}
